# Cloudflare Worker configuration for Social MM scheduled publisher

name = "social-mm-scheduler"
main = "scheduled-publisher.js"
compatibility_date = "2024-11-01"

# Cron trigger - runs every minute
[triggers]
crons = ["* * * * *"]

# Environment variables
[vars]
# These will be set in Cloudflare dashboard or via wrangler secret
NEXTJS_APP_URL = "https://your-app.vercel.app"  # Replace with your actual Vercel URL

# Secrets (set these using: wrangler secret put SECRET_NAME)
# CRON_SECRET = "your-secure-cron-secret-here"
# UPSTASH_QUEUE_URL = "your-upstash-queue-url-here"

# Development configuration
[env.development]
vars = { NEXTJS_APP_URL = "https://localhost:3443" }

# Production configuration  
[env.production]
vars = { NEXTJS_APP_URL = "https://your-production-domain.com" }

# Worker settings
[build]
command = ""

# Limits
[limits]
cpu_ms = 10000  # 10 seconds max execution time
